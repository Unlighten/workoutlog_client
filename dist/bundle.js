$(function(){var o=function(o,e){return{API_BASE:"http://localhost:3000/api/",setAuthHeader:function(e){window.localStorage.setItem("sessionToken",e),o.ajaxSetup({headers:{Authorization:e}})}}}(jQuery);$(".nav-tabs a[data-toggle=tab]").on("click",function(o){var e=window.localStorage.getItem("sessionToken");if($(this).hasClass("disabled")&&!e)return o.preventDefault(),!1}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target).attr("href");"#log"===t&&o.log.setDefinitions(),"#update-log"===t&&o.log.setDefinitions(),"#history"===t&&o.log.setHistory()}),$(document).on("keypress",function(o){13===o.which&&($("#signup-modal").is(":visible")&&$("#signup").trigger("click"),$("#login-modal").is(":visible")&&$("#login").trigger("click"))}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target).attr("href");"#log"===t&&o.log.setDefinitions(),"#history"===t&&o.log.setHistory()}),$(document).on("keypress",function(o){13===o.which&&($("#signup-modal").is(":visible")&&$("#signup").trigger("click"),$("#login-modal").is(":visible")&&$("#login").trigger("click"))});var e=window.localStorage.getItem("sessionToken");e&&o.setAuthHeader(e),window.WorkoutLog=o}),$(function(){$.extend(WorkoutLog,{definition:{userDefinitions:[],create:function(){var o={definition:{desc:$("#def-description").val(),type:$("#def-logtype").val()}};$.ajax({type:"POST",url:WorkoutLog.API_BASE+"definition",data:JSON.stringify(o),contentType:"application/json"}).done(function(o){WorkoutLog.definition.userDefinitions.push(o.definition),$("#def-description").val(""),$("#def-log").val(""),$('a[href="#log"]').tab("show")})},fetchAll:function(){$.ajax({type:"GET",url:WorkoutLog.API_BASE+"definition",headers:{authorization:window.localStorage.getItem("sessionToken")}}).done(function(o){WorkoutLog.definition.userDefinitions=o}).fail(function(o){console.log(o)})}}}),$("#def-save").on("click",WorkoutLog.definition.create),window.localStorage.getItem("sessionToken")&&WorkoutLog.definition.fetchAll()}),$(function(){$.extend(WorkoutLog,{log:{workouts:[],setDefinitions:function(o){for(var e,t=WorkoutLog.definition.userDefinitions,i=t.length,n=0;n<i;n++)e+="<option value='"+t[n].id+"'>"+t[n].description+"</option>";$("#log-definition").children().remove(),$("#log-definition").append(e),$("#update-definition").children().remove(),$("#update-definition").append(e)},setHistory:function(){var o=WorkoutLog.log.workouts;console.table(o);for(var e=o.length,t="",i=0;i<e;i++)t+="<li class='list-group-item'>"+o[i].def+" - "+o[i].result+" <div class='pull-right'><button id='"+o[i].id+"' class='update'><strong>U</strong></button><button id='"+o[i].id+"' class='remove'><strong>X</strong></button></div></li>";$("#history-list").children().remove(),$("#history-list").append(t)},create:function(){var o={log:{desc:$("#log-description").val(),result:$("#log-result").val(),def:$("#log-definition option:selected").text()}};console.table(o),$.ajax({type:"POST",url:WorkoutLog.API_BASE+"log",data:JSON.stringify(o),contentType:"application/json"}).done(function(o){console.log(o),WorkoutLog.log.workouts.push(o),$("#log-description").val(""),$("#log-result").val(""),$('a[href="#history"]').tab("show")})},getWorkout:function(){var o={id:$(this).attr("id")};console.log(o),logID=o.id;var e={log:o};$.ajax({type:"GET",url:WorkoutLog.API_BASE+"log/"+logID,data:JSON.stringify(e),contentType:"application/json"}).done(function(o){$('a[href="#update-log"]').tab("show"),$("#update-result").val(o.result),$("#update-description").val(o.description),$("#update-id").val(o.id)})},updateWorkout:function(){$("#update").text("Update");for(var o={id:$("#update-id").val(),desc:$("#update-description").val(),result:$("#update-result").val(),def:$("#update-definition option:selected").text()},e=0;e<WorkoutLog.log.workouts.length;e++)WorkoutLog.log.workouts[e].id==o.id&&WorkoutLog.log.workouts.splice(e,1);WorkoutLog.log.workouts.push(o);var t={log:o};$.ajax({type:"PUT",url:WorkoutLog.API_BASE+"log",data:JSON.stringify(t),contentType:"application/json"}).done(function(o){console.log(o),$("#update-description").val(""),$("#update-result").val(""),$('a[href="#history"]').tab("show")})},delete:function(){var o={id:$(this).attr("id")},e={log:o},t=$.ajax({type:"DELETE",url:WorkoutLog.API_BASE+"log",data:JSON.stringify(e),contentType:"application/json"});$(this).closest("li").remove();for(var i=0;i<WorkoutLog.log.workouts.length;i++)WorkoutLog.log.workouts[i].id==o.id&&WorkoutLog.log.workouts.splice(i,1);t.fail(function(){console.log("nope. you didn't delete it.")})},fetchAll:function(){$.ajax({type:"GET",url:WorkoutLog.API_BASE+"log",headers:{authorization:window.localStorage.getItem("sessionToken")}}).done(function(o){WorkoutLog.log.workouts=o}).fail(function(o){console.log(o)})}}}),$("#log-save").on("click",WorkoutLog.log.create),$("#history-list").delegate(".remove","click",WorkoutLog.log.delete),$("#log-update").on("click",WorkoutLog.log.updateWorkout),$("#history-list").delegate(".update","click",WorkoutLog.log.getWorkout),window.localStorage.getItem("sessionToken")&&WorkoutLog.log.fetchAll()}),$(function(){$.extend(WorkoutLog,{signup:function(){var o={user:{fname:$("#su_fname").val(),lname:$("#su_lname").val(),email:$("#su_email").val(),username:$("#su_username").val(),password:$("#su_password").val(),pic:$("#su_pic").val()}};$.ajax({type:"POST",url:WorkoutLog.API_BASE+"user",data:JSON.stringify(o),contentType:"application/json"}).done(function(o){o.sessionToken&&(WorkoutLog.setAuthHeader(o.sessionToken),WorkoutLog.definition.fetchAll(),WorkoutLog.log.fetchAll()),$("#signup-modal").modal("hide"),$(".tib-tab").removeClass("invisible"),$("#loginout").text("Logout"),$(".side-title-1").text("Welcome Back!"),$("#side-image").removeClass("invisible"),$("#sidebar-login-id").addClass("invisible"),$(".side-title-2").addClass("invisible"),$("#signup-but").addClass("invisible"),$('.nav-tabs a[href="#workoutnow"]').tab("show"),$("#su_fname").val(""),$("#su_lname").val(""),$("#su_email").val(""),$("#su_username").val(""),$("#su_password").val(""),$("#su_pic").val("")}).fail(function(){$("#su_error").text("There was an issue with your username").show()})},login:function(){var o={user:{username:$("#li_username").val(),password:$("#li_password").val()}};$.ajax({type:"POST",url:WorkoutLog.API_BASE+"login",data:JSON.stringify(o),contentType:"application/json"}).done(function(o){o.sessionToken&&(WorkoutLog.setAuthHeader(o.sessionToken),WorkoutLog.definition.fetchAll(),WorkoutLog.log.fetchAll());var e=new FileReader;e.onload=function(t){var i=o.user.pic;console.log(i);for(var n,s=new Uint8Array(i.data),l=0;l<s.length;l++)n+=String.fromCharCode(s[l]);for(var a="",l=n.indexOf("C");l<n.length;l++)a+=n[l];var r=new Blob([a],{type:"plain/jpg"});e.readAsDataURL(r)}(),$("#login-modal").modal("hide"),$(".tib-tab").removeClass("invisible"),$("#side-image").attr("src",o.user.pic),$(".side-title-1").text("Welcome Back!"),$("#side-image").removeClass("invisible"),$("#sidebar-login-id").addClass("invisible"),$(".side-title-2").addClass("invisible"),$("#signup-but").addClass("invisible"),$("#loginout").text("Logout"),$("#li_username").val(""),$("#li_password").val(""),$('a[href="#workoutnow"]').tab("show")}).fail(function(){$("#li_error").text("There was an issue with your username or password").show()})},loginout:function(){window.localStorage.getItem("sessionToken")&&(window.localStorage.removeItem("sessionToken"),window.location.reload(!0)),$(".side-title-1").text("Already a Swole member?"),$("#sidebar-login-id").removeClass("invisible"),$(".side-title-2").removeClass("invisible"),$("#signup-but").removeClass("invisible"),$("#side-image").addClass("invisible"),$(".tib-tab").addClass("invisible")}}),$("#login").on("click",WorkoutLog.login),$("#signup").on("click",WorkoutLog.signup),$("#loginout").on("click",WorkoutLog.loginout),window.localStorage.getItem("sessionToken")&&$("#loginout").text("Logout")}),window.onload=function(){function o(){++i<9&&(s.innerHTML="0"+i),i>9&&(s.innerHTML=i),i>99&&(console.log("seconds"),t++,l.innerHTML="0"+t,i=0,s.innerHTML="00"),t>9&&(l.innerHTML=t),59==t&&(console.log("minutes"),n++,a.innerHTML="0"+n,t=0,l.innerHTML="0")}var e,t=0,i=0,n=0,s=document.getElementById("tens"),l=document.getElementById("seconds"),a=document.getElementById("minutes"),r=document.getElementById("stopbut-start"),u=document.getElementById("stopbut-stop"),d=document.getElementById("stopbut-reset");r.onclick=function(){clearInterval(e),e=setInterval(o,10)},u.onclick=function(){clearInterval(e)},d.onclick=function(){clearInterval(e),n="00",i="00",t="00",s.innerHTML=i,l.innerHTML=t,a.innerHTML=n}};
//# sourceMappingURL=maps/bundle.js.map
